<!-- src/main/resources/templates/crear-pizza.html -->
<!doctype html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>PizzUM &amp; BurgUM ‚Äî Crear pizza</title>

  <link rel="stylesheet" th:href="@{/css/main.css}">
  <link rel="stylesheet" th:href="@{/css/layout.css}">
  <link rel="stylesheet" th:href="@{/css/components.css}">
  <link rel="stylesheet" th:href="@{/css/pages.css}">
</head>
<body class="theme-italian">

<header class="site-header">
  <div class="container header__inner">
    <a class="brand" th:href="@{/}">
      <img th:src="@{/img/logo.png}" alt="PizzUM &amp; BurgUM" class="brand__logo">
      <span class="brand__name">PizzUM &amp; BurgUM</span>
    </a>
    <nav class="site-nav">
      <a class="nav__link"
         th:classappend="${page == 'pizza'} ? ' is-active'"
         th:href="@{/crear-pizza}">
        Crear pizza
      </a>
      <a class="nav__link"
         th:classappend="${page == 'burger'} ? ' is-active'"
         th:href="@{/crear-burger}">
        Crear hamburguesa
      </a>
      <a class="nav__link"
         th:classappend="${page == 'favoritos'} ? ' is-active'"
         th:href="@{/favoritos}">
        ‚ù§Ô∏è Favoritos
      </a>
      <a class="nav__link"
         th:classappend="${page == 'carrito'} ? ' is-active'"
         th:href="@{/carrito}">
        Carrito
      </a>
      <a class="nav__link"
         th:classappend="${page == 'pedido'} ? ' is-active'"
         th:href="@{/pedido}">
        Pedidos
      </a>
    </nav>
  </div>
</header>

<main>
  <section class="page-hero">
    <div class="container page-hero__inner">
      <div class="page-hero__media">
        <img th:src="@{/img/custom-pizza.png}" alt="Ingredientes frescos para tu pizza" class="page-hero__img">
      </div>
      <div class="page-hero__content">
        <h1>Cre√° tu pizza üçï</h1>
        <p>Eleg√≠ tama√±o, masa, salsa, queso y toppings. Despu√©s agregala al carrito.</p>
      </div>
    </div>
  </section>

  <section class="container section">
    <form id="favForm" th:action="@{/favoritos/agregar}" method="post" style="display:none;">
      <input type="hidden" name="tipo" value="pizza">
    </form>

    <form class="form form--builder" method="post" th:action="@{/crear-pizza}">
      <!-- Tama√±o -->
      <fieldset class="form-section">
        <legend class="form-section__title">Tama√±o</legend>
        <div class="options options--inline">
          <label class="option">
            <input type="radio" name="tamanio" id="tamanio-s" value="S"
                   required
                   th:checked="${tamanioSeleccionado} == 'S'">
            <span class="option__label">Peque√±a (S) <small class="option__price">$ 320</small></span>
          </label>
          <label class="option">
            <input type="radio" name="tamanio" id="tamanio-m" value="M"
                   th:checked="${tamanioSeleccionado} == 'M'">
            <span class="option__label">Mediana (M) <small class="option__price">$ 420</small></span>
          </label>
          <label class="option">
            <input type="radio" name="tamanio" id="tamanio-l" value="L"
                   th:checked="${tamanioSeleccionado} == 'L'">
            <span class="option__label">Grande (L) <small class="option__price">$ 520</small></span>
          </label>
        </div>
      </fieldset>

      <!-- Tipo de masa -->
      <fieldset class="form-section">
        <legend class="form-section__title">Tipo de masa</legend>
        <div class="options options--inline">
          <label class="option">
            <input type="radio" name="masa" id="masa-napolitana" value="napolitana"
                   required
                   th:checked="${masaSeleccionada} == 'napolitana'">
            <span class="option__label">Napolitana <small class="option__price">incluido</small></span>
          </label>
          <label class="option">
            <input type="radio" name="masa" id="masa-integral" value="integral"
                   th:checked="${masaSeleccionada} == 'integral'">
            <span class="option__label">Integral <small class="option__price">$ 40</small></span>
          </label>
          <label class="option">
            <input type="radio" name="masa" id="masa-sin-gluten" value="sin_gluten"
                   th:checked="${masaSeleccionada} == 'sin_gluten'">
            <span class="option__label">Sin gluten <small class="option__price">$ 60</small></span>
          </label>
        </div>
      </fieldset>

      <!-- Salsa -->
      <fieldset class="form-section">
        <legend class="form-section__title">Salsa</legend>
        <div class="options options--inline">
          <label class="option">
            <input type="radio" name="salsa" id="salsa-tomate" value="tomate"
                   required
                   th:checked="${salsaSeleccionada} == 'tomate'">
            <span class="option__label">Tomate <small class="option__price">incluido</small></span>
          </label>
          <label class="option">
            <input type="radio" name="salsa" id="salsa-pomodoro" value="pomodoro"
                   th:checked="${salsaSeleccionada} == 'pomodoro'">
            <span class="option__label">Pomodoro <small class="option__price">$ 35</small></span>
          </label>
          <label class="option">
            <input type="radio" name="salsa" id="salsa-otra" value="otra"
                   th:checked="${salsaSeleccionada} == 'otra'">
            <span class="option__label">Especial <small class="option__price">$ 45</small></span>
          </label>
        </div>
      </fieldset>

      <!-- Queso -->
      <fieldset class="form-section">
        <legend class="form-section__title">Queso</legend>
        <div class="options options--inline">
          <label class="option">
            <input type="radio" name="queso" id="queso-muzza" value="muzza"
                   required
                   th:checked="${quesoSeleccionado} == 'muzza'">
            <span class="option__label">Muzzarella <small class="option__price">incluido</small></span>
          </label>
          <label class="option">
            <input type="radio" name="queso" id="queso-roquefort" value="roquefort"
                   th:checked="${quesoSeleccionado} == 'roquefort'">
            <span class="option__label">Roquefort <small class="option__price">$ 70</small></span>
          </label>
          <label class="option">
            <input type="radio" name="queso" id="queso-otro" value="otro"
                   th:checked="${quesoSeleccionado} == 'otro'">
            <span class="option__label">Blend especial <small class="option__price">$ 40</small></span>
          </label>
        </div>
      </fieldset>

      <!-- Toppings -->
      <fieldset class="form-section">
        <legend class="form-section__title">Toppings</legend>
        <p class="form-hint">Seleccion√° los que quieras (opcional).</p>
        <p class="form-hint form-hint--total"
           data-section-total="toppings"
           th:text="${toppingsLinea}">Sin toppings extras ¬∑ $ 0</p>

        <div class="options options--grid">
          <label class="option option--checkbox">
            <input type="checkbox" name="toppings" value="aceitunas"
                   th:checked="${toppingsSeleccionados != null and toppingsSeleccionados.contains('aceitunas')}">
            <span class="option__label">
              Aceitunas <small class="option__price">$ 30</small>
            </span>
          </label>

          <label class="option option--checkbox">
            <input type="checkbox" name="toppings" value="albahaca"
                   th:checked="${toppingsSeleccionados != null and toppingsSeleccionados.contains('albahaca')}">
            <span class="option__label">
              Albahaca <small class="option__price">$ 25</small>
            </span>
          </label>

          <label class="option option--checkbox">
            <input type="checkbox" name="toppings" value="morron"
                   th:checked="${toppingsSeleccionados != null and toppingsSeleccionados.contains('morron')}">
            <span class="option__label">
              Morr√≥n <small class="option__price">$ 25</small>
            </span>
          </label>

          <label class="option option--checkbox">
            <input type="checkbox" name="toppings" value="cebolla"
                   th:checked="${toppingsSeleccionados != null and toppingsSeleccionados.contains('cebolla')}">
            <span class="option__label">
              Cebolla <small class="option__price">$ 20</small>
            </span>
          </label>

          <label class="option option--checkbox">
            <input type="checkbox" name="toppings" value="champiniones"
                   th:checked="${toppingsSeleccionados != null && toppingsSeleccionados.contains('champiniones')}">
            <span class="option__label">
              Champi√±ones <small class="option__price">$ 35</small>
            </span>
          </label>

          <label class="option option--checkbox">
            <input type="checkbox" name="toppings" value="jamon"
                   th:checked="${toppingsSeleccionados != null && toppingsSeleccionados.contains('jamon')}">
            <span class="option__label">
              Jam√≥n <small class="option__price">$ 40</small>
            </span>
          </label>

          <label class="option option--checkbox">
            <input type="checkbox" name="toppings" value="bacon"
                   th:checked="${toppingsSeleccionados != null && toppingsSeleccionados.contains('bacon')}">
            <span class="option__label">
              Bacon <small class="option__price">$ 40</small>
            </span>
          </label>

          <label class="option option--checkbox">
            <input type="checkbox" name="toppings" value="anana"
                   th:checked="${toppingsSeleccionados != null && toppingsSeleccionados.contains('anana')}">
            <span class="option__label">
              Anan√° <small class="option__price">$ 30</small>
            </span>
          </label>
        </div>
      </fieldset>

      <!-- Cantidad + observaciones -->
      <fieldset class="form-section form-section--row">
        <div class="form-group">
          <label for="cantidad">Cantidad</label>
          <input type="number" id="cantidad" name="cantidad" min="1" step="1"
                 class="input input--number"
                 th:value="${cantidad != null} ? ${cantidad} : 1">
        </div>
        <div class="form-group form-group--grow">
          <label for="observaciones">Observaciones (opcional)</label>
          <textarea id="observaciones" name="observaciones" rows="2"
                    class="input input--textarea"
                    placeholder="Ej: sin picante, cortar en 8 porciones"
                    th:text="${observaciones}"></textarea>
        </div>
      </fieldset>

      <!-- Bot√≥n de favoritos -->
      <div class="favorites-box" style="text-align: right; margin-bottom: 1rem;">
        <button type="submit"
                class="btn btn--secondary"
                form="favForm"
                th:formaction="@{/favoritos/agregar}"
                formmethod="post">
          ‚ù§Ô∏è Agregar a favoritos
        </button>
      </div>

      <!-- Resumen -->
      <section class="summary-box" aria-live="polite">
        <h2 class="summary-box__title">Resumen</h2>
        <ul class="summary-list">
          <li><strong>Tama√±o:</strong> <span th:text="${tamanioResumen}">‚Äî</span></li>
          <li><strong>Masa:</strong> <span th:text="${masaResumen}">‚Äî</span></li>
          <li><strong>Salsa:</strong> <span th:text="${salsaResumen}">‚Äî</span></li>
          <li><strong>Queso:</strong> <span th:text="${quesoResumen}">‚Äî</span></li>
          <li><strong>Toppings:</strong> <span th:text="${toppingsResumen}">‚Äî</span></li>
          <li><strong>Cantidad:</strong> <span th:text="${cantidad != null} ? ${cantidad} : 1">1</span></li>
        </ul>
        <div class="summary-total">
          <span class="summary-total__label">Total estimado</span>
          <span class="summary-total__value" th:text="${totalEstimado}">$ ‚Äî</span>
        </div>
      </section>

      <!-- Acciones -->
      <div class="form-actions">
        <button type="submit" class="btn btn--secondary" name="accion" value="actualizar">
          Actualizar resumen
        </button>
        <button type="submit" class="btn btn--primary" name="accion" value="agregar">
          Agregar al carrito
        </button>
        <a class="btn btn--ghost" th:href="@{/carrito}">Ver carrito</a>
        <a class="btn btn--link" th:href="@{/}">Volver al inicio</a>
      </div>
    </form>
  </section>
</main>

<footer class="site-footer">
  <div class="container footer__inner">
    <small>&copy; 2025 PizzUM &amp; BurgUM</small>
    <nav class="footer-nav">
      <a th:href="@{#}" class="footer__link">Ayuda</a>
      <a th:href="@{#}" class="footer__link">T√©rminos</a>
      <a th:href="@{#}" class="footer__link">Privacidad</a>
    </nav>
  </div>
</footer>

</body>
</html>
