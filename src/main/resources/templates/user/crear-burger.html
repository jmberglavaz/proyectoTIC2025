<!-- src/main/resources/templates/crear-burger.html -->
<!doctype html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>PizzUM &amp; BurgUM ‚Äî Crear hamburguesa</title>

    <link rel="stylesheet" th:href="@{/css/main.css}">
    <link rel="stylesheet" th:href="@{/css/layout.css}">
    <link rel="stylesheet" th:href="@{/css/components.css}">
    <link rel="stylesheet" th:href="@{/css/pages.css}">
</head>
<body class="theme-italian">

<header class="site-header">
    <div class="container header__inner">
        <a class="brand" th:href="@{/}">
            <img th:src="@{/img/logo.png}" alt="PizzUM &amp; BurgUM" class="brand__logo">
            <span class="brand__name">PizzUM &amp; BurgUM</span>
        </a>
        <nav class="site-nav">
            <a class="nav__link"
               th:classappend="${page == 'pizza'} ? ' is-active'"
               th:href="@{/crear-pizza}">
                Crear pizza
            </a>
            <a class="nav__link"
               th:classappend="${page == 'burger'} ? ' is-active'"
               th:href="@{/crear-burger}">
                Crear hamburguesa
            </a>
            <a class="nav__link"
               th:classappend="${page == 'favoritos'} ? ' is-active'"
               th:href="@{/favoritos}">
                ‚ù§Ô∏è Favoritos
            </a>
            <a class="nav__link"
               th:classappend="${page == 'carrito'} ? ' is-active'"
               th:href="@{/carrito}">
                Carrito
            </a>
            <a class="nav__link"
               th:classappend="${page == 'pedido'} ? ' is-active'"
               th:href="@{/pedido}">
                Pedidos
            </a>
        </nav>
    </div>
</header>

<main>
    <section class="page-hero">
        <div class="container page-hero__inner">
            <div class="page-hero__media">
                <img th:src="@{/img/custom-burger.png}" alt="Ingredientes frescos para tu hamburguesa" class="page-hero__img">
            </div>
            <div class="page-hero__content">
                <h1>Cre√° tu hamburguesa üçî</h1>
                <p>Eleg√≠ la cantidad de carnes (1 a 3), tipo de carne, pan, aderezos y extras. Agregala al carrito.</p>
            </div>
        </div>
    </section>

    <section class="container section">
        <form id="favBurgerForm" th:action="@{/favoritos/agregar}" method="post" style="display:none;">
            <input type="hidden" name="tipo" value="burger">
        </form>

        <form class="form form--builder" method="post" th:action="@{/crear-burger}">
            <!-- Cantidad de carnes -->
            <fieldset class="form-section">
                <legend class="form-section__title">Cantidad de carnes</legend>
                <div class="options options--inline">
                    <label class="option">
                        <input type="radio" name="cantidad_carnes" value="1"
                               required
                               th:checked="${cantidad_carnes} == 1">
                        <span class="option__label">1 carne <small class="option__price">$ 310</small></span>
                    </label>
                    <label class="option">
                        <input type="radio" name="cantidad_carnes" value="2"
                               th:checked="${cantidad_carnes} == 2">
                        <span class="option__label">2 carnes <small class="option__price">$ 420</small></span>
                    </label>
                    <label class="option">
                        <input type="radio" name="cantidad_carnes" value="3"
                               th:checked="${cantidad_carnes} == 3">
                        <span class="option__label">3 carnes <small class="option__price">$ 520</small></span>
                    </label>
                </div>
            </fieldset>

            <!-- Tipo de carne -->
            <fieldset class="form-section">
                <legend class="form-section__title">Tipo de carne</legend>
                <div class="options options--inline">
                    <label class="option">
                        <input type="radio" name="tipo_carne" value="vaca"
                               required
                               th:checked="${tipo_carne} == 'vaca'">
                        <span class="option__label">Vaca <small class="option__price">incluido</small></span>
                    </label>
                    <label class="option">
                        <input type="radio" name="tipo_carne" value="pollo"
                               th:checked="${tipo_carne} == 'pollo'">
                        <span class="option__label">Pollo <small class="option__price">$ 25</small></span>
                    </label>
                    <label class="option">
                        <input type="radio" name="tipo_carne" value="cerdo"
                               th:checked="${tipo_carne} == 'cerdo'">
                        <span class="option__label">Cerdo <small class="option__price">$ 30</small></span>
                    </label>
                    <label class="option">
                        <input type="radio" name="tipo_carne" value="salmon"
                               th:checked="${tipo_carne} == 'salmon'">
                        <span class="option__label">Salm√≥n <small class="option__price">$ 45</small></span>
                    </label>
                    <label class="option">
                        <input type="radio" name="tipo_carne" value="lentejas"
                               th:checked="${tipo_carne} == 'lentejas'">
                        <span class="option__label">Lentejas <small class="option__price">$ 15</small></span>
                    </label>
                    <label class="option">
                        <input type="radio" name="tipo_carne" value="soja"
                               th:checked="${tipo_carne} == 'soja'">
                        <span class="option__label">Soja <small class="option__price">$ 18</small></span>
                    </label>
                </div>
            </fieldset>

            <!-- Tipo de pan -->
            <fieldset class="form-section">
                <legend class="form-section__title">Tipo de pan</legend>
                <div class="options options--inline">
                    <label class="option">
                        <input type="radio" name="tipo_pan" value="papa"
                               required
                               th:checked="${tipo_pan} == 'papa' or tipo_pan == null">
                        <span class="option__label">Pan de papa <small class="option__price">incluido</small></span>
                    </label>
                    <label class="option">
                        <input type="radio" name="tipo_pan" value="integral"
                               th:checked="${tipo_pan} == 'integral'">
                        <span class="option__label">Integral <small class="option__price">$ 25</small></span>
                    </label>
                    <label class="option">
                        <input type="radio" name="tipo_pan" value="sin_gluten"
                               th:checked="${tipo_pan} == 'sin_gluten'">
                        <span class="option__label">Sin gluten <small class="option__price">$ 45</small></span>
                    </label>
                </div>
            </fieldset>

            <!-- Aderezos -->
            <fieldset class="form-section">
                <legend class="form-section__title">Aderezos</legend>
                <p class="form-hint">Pod√©s elegir varios (opcional).</p>
                <p class="form-hint form-hint--total"
                   data-section-total="aderezos"
                   th:text="${aderezosLinea}">Sin aderezos ¬∑ $ 0</p>
                <div class="options options--grid">
                    <label class="option option--checkbox">
                        <input type="checkbox" name="aderezos" value="ketchup"
                               th:checked="${aderezosSeleccionados != null && aderezosSeleccionados.contains('ketchup')}">
                        <span class="option__label">Ketchup</span>
                    </label>
                    <label class="option option--checkbox">
                        <input type="checkbox" name="aderezos" value="mostaza"
                               th:checked="${aderezosSeleccionados != null && aderezosSeleccionados.contains('mostaza')}">
                        <span class="option__label">Mostaza</span>
                    </label>
                    <label class="option option--checkbox">
                        <input type="checkbox" name="aderezos" value="mayonesa"
                               th:checked="${aderezosSeleccionados != null && aderezosSeleccionados.contains('mayonesa')}">
                        <span class="option__label">Mayonesa</span>
                    </label>
                    <label class="option option--checkbox">
                        <input type="checkbox" name="aderezos" value="bbq"
                               th:checked="${aderezosSeleccionados != null && aderezosSeleccionados.contains('bbq')}">
                        <span class="option__label">BBQ</span>
                    </label>
                    <label class="option option--checkbox">
                        <input type="checkbox" name="aderezos" value="picante"
                               th:checked="${aderezosSeleccionados != null && aderezosSeleccionados.contains('picante')}">
                        <span class="option__label">Picante</span>
                    </label>
                </div>
            </fieldset>

            <!-- Extras -->
            <fieldset class="form-section">
                <legend class="form-section__title">Extras</legend>
                <p class="form-hint">Seleccion√° los que quieras (opcional).</p>
                <p class="form-hint form-hint--total"
                   data-section-total="extras"
                   th:text="${extrasLinea}">Sin extras ¬∑ $ 0</p>
                <div class="options options--grid">
                    <label class="option option--checkbox">
                        <input type="checkbox" name="extras" value="extra_queso"
                               th:checked="${extrasSeleccionados != null && extrasSeleccionados.contains('extra_queso')}">
                        <span class="option__label">
              Queso extra <small class="option__price">$ 35</small>
            </span>
                    </label>
                    <label class="option option--checkbox">
                        <input type="checkbox" name="extras" value="bacon"
                               th:checked="${extrasSeleccionados != null && extrasSeleccionados.contains('bacon')}">
                        <span class="option__label">
              Bacon <small class="option__price">$ 45</small>
            </span>
                    </label>
                    <label class="option option--checkbox">
                        <input type="checkbox" name="extras" value="huevo"
                               th:checked="${extrasSeleccionados != null && extrasSeleccionados.contains('huevo')}">
                        <span class="option__label">
              Huevo <small class="option__price">$ 30</small>
            </span>
                    </label>
                    <label class="option option--checkbox">
                        <input type="checkbox" name="extras" value="queso_azul"
                               th:checked="${extrasSeleccionados != null && extrasSeleccionados.contains('queso_azul')}">
                        <span class="option__label">
              Queso azul <small class="option__price">$ 40</small>
            </span>
                    </label>
                    <label class="option option--checkbox">
                        <input type="checkbox" name="extras" value="cebolla"
                               th:checked="${extrasSeleccionados != null && extrasSeleccionados.contains('cebolla')}">
                        <span class="option__label">
              Cebolla <small class="option__price">$ 20</small>
            </span>
                    </label>
                    <label class="option option--checkbox">
                        <input type="checkbox" name="extras" value="tomate"
                               th:checked="${extrasSeleccionados != null && extrasSeleccionados.contains('tomate')}">
                        <span class="option__label">
              Tomate <small class="option__price">$ 20</small>
            </span>
                    </label>
                </div>
            </fieldset>

            <!-- Cantidad + observaciones -->
            <fieldset class="form-section form-section--row">
                <div class="form-group">
                    <label for="cantidad">Cantidad</label>
                    <input type="number" id="cantidad" name="cantidad" min="1" step="1"
                           class="input input--number"
                           th:value="${cantidad != null} ? ${cantidad} : 1">
                </div>
                <div class="form-group form-group--grow">
                    <label for="observaciones">Observaciones (opcional)</label>
                    <textarea id="observaciones" name="observaciones" rows="2"
                              class="input input--textarea"
                              placeholder="Ej: sin pepinillos, con mucho ketchup"
                              th:text="${observaciones}"></textarea>
                </div>
            </fieldset>

            <!-- Bot√≥n de favoritos -->
            <div class="favorites-box" style="text-align: right; margin-bottom: 1rem;">
                <button type="submit"
                        class="btn btn--secondary"
                        form="favBurgerForm"
                        th:formaction="@{/favoritos/agregar}"
                        formmethod="post">
                    ‚ù§Ô∏è Agregar a favoritos
                </button>
            </div>

            <!-- Resumen -->
            <section class="summary-box" aria-live="polite">
                <h2 class="summary-box__title">Resumen</h2>
                <ul class="summary-list">
                    <li><strong>Cant. carnes:</strong> <span th:text="${cantCarnesResumen}">‚Äî</span></li>
                    <li><strong>Tipo de carne:</strong> <span th:text="${tipoCarneResumen}">‚Äî</span></li>
                    <li><strong>Pan:</strong> <span th:text="${tipoPanResumen}">‚Äî</span></li>
                    <li><strong>Aderezos:</strong> <span th:text="${aderezosResumen}">‚Äî</span></li>
                    <li><strong>Extras:</strong> <span th:text="${extrasResumen}">‚Äî</span></li>
                    <li><strong>Cantidad:</strong> <span th:text="${cantidad != null} ? ${cantidad} : 1">1</span></li>
                </ul>
                <div class="summary-total">
                    <span class="summary-total__label">Total estimado</span>
                    <span class="summary-total__value" th:text="${totalEstimado}">$ ‚Äî</span>
                </div>
            </section>

            <!-- Acciones -->
            <div class="form-actions">
                <button type="submit" class="btn btn--secondary" name="accion" value="actualizar">
                    Actualizar resumen
                </button>
                <button type="submit" class="btn btn--primary" name="accion" value="agregar">
                    Agregar al carrito
                </button>
                <a class="btn btn--ghost" th:href="@{/carrito}">Ver carrito</a>
                <a class="btn btn--link" th:href="@{/}">Volver al inicio</a>
            </div>
        </form>
    </section>
</main>

<footer class="site-footer">
    <div class="container footer__inner">
        <small>&copy; 2025 PizzUM &amp; BurgUM</small>
        <nav class="footer-nav">
            <a th:href="@{#}" class="footer__link">Ayuda</a>
            <a th:href="@{#}" class="footer__link">T√©rminos</a>
            <a th:href="@{#}" class="footer__link">Privacidad</a>
        </nav>
    </div>
</footer>

</body>
</html>
